<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Trading Journal — Minimal</title>
  <meta name="description" content="A minimalist trading journal that runs 100% in your browser using localStorage." />
  <link rel="icon" href="favicon.svg" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <style>
    /* Extra tiny tweaks that Tailwind doesn't cover nicely */
    .input { @apply w-full rounded-xl border border-zinc-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-zinc-400 bg-white; }
    .btn { @apply rounded-2xl border px-3 py-2 text-sm font-medium shadow-sm hover:shadow transition; }
    .btn-primary { @apply bg-black text-white border-black; }
    .btn-ghost { @apply bg-white text-black border-zinc-300; }
    .card { @apply rounded-2xl bg-white p-4 shadow-sm border border-zinc-200; }
    .label { @apply text-xs font-medium text-zinc-600; }
    .value { @apply text-lg font-semibold text-zinc-900 tabular-nums; }
    .chip { @apply inline-flex items-center gap-1 rounded-full border border-zinc-300 px-2 py-0.5 text-xs; }
    .link { @apply underline decoration-dotted underline-offset-4; }
  </style>
</head>
<body class="bg-zinc-50 text-zinc-900">
  <div class="max-w-7xl mx-auto p-4 sm:p-6">
    <header class="mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
      <h1 class="text-2xl sm:text-3xl font-semibold tracking-tight">Trading Journal</h1>
      <div class="flex flex-wrap items-center gap-2">
        <label class="btn btn-ghost cursor-pointer">
          <input id="importFile" type="file" accept=".csv" class="hidden" />
          Import CSV
        </label>
        <button id="exportBtn" class="btn btn-ghost">Export CSV</button>
        <button id="resetBtn" class="btn btn-ghost">Reset Data</button>
        <button id="sampleBtn" class="btn btn-primary">Load Sample</button>
      </div>
    </header>

    <!-- KPI cards -->
    <section id="stats" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3 mb-6">
      <div class="card"><div class="label">Total Trades</div><div id="kpi-trades" class="value">0</div></div>
      <div class="card"><div class="label">Win Rate</div><div id="kpi-winrate" class="value">0%</div></div>
      <div class="card"><div class="label">Expectancy (R)</div><div id="kpi-expectancy" class="value">0.00</div></div>
      <div class="card"><div class="label">Total P&amp;L</div><div id="kpi-pnl" class="value">₹0</div></div>
      <div class="card"><div class="label">Avg R</div><div id="kpi-avgR" class="value">0.00</div></div>
      <div class="card"><div class="label">Max Drawdown</div><div id="kpi-mdd" class="value">₹0</div></div>
    </section>

    <section class="grid lg:grid-cols-3 gap-6">
      <!-- Form + Filters -->
      <aside class="lg:col-span-1 space-y-6">
        <div class="card space-y-3">
          <div class="flex items-center justify-between">
            <h2 class="font-semibold">Add / Edit Trade</h2>
            <button id="clearFormBtn" class="btn btn-ghost text-xs">Clear</button>
          </div>
          <form id="tradeForm" class="space-y-3">
            <input type="hidden" id="tradeId" />
            <div>
              <label class="label">Date/Time</label>
              <input id="date" type="datetime-local" class="input" required />
            </div>
            <div class="grid grid-cols-2 gap-3">
              <div>
                <label class="label">Symbol</label>
                <input id="symbol" type="text" class="input" placeholder="NIFTY, RELIANCE" required />
              </div>
              <div>
                <label class="label">Side</label>
                <select id="side" class="input">
                  <option>LONG</option>
                  <option>SHORT</option>
                </select>
              </div>
            </div>
            <div class="grid grid-cols-2 gap-3">
              <div>
                <label class="label">Quantity</label>
                <input id="qty" type="number" min="1" step="1" class="input" value="1" required />
              </div>
              <div>
                <label class="label">Fees</label>
                <input id="fees" type="number" step="0.01" class="input" value="0" />
              </div>
            </div>
            <div class="grid grid-cols-3 gap-3">
              <div>
                <label class="label">Entry</label>
                <input id="entry" type="number" step="0.01" class="input" required />
              </div>
              <div>
                <label class="label">Exit</label>
                <input id="exit" type="number" step="0.01" class="input" required />
              </div>
              <div>
                <label class="label">Stop (opt.)</label>
                <input id="stop" type="number" step="0.01" class="input" placeholder="for R calc" />
              </div>
            </div>
            <div class="grid grid-cols-2 gap-3">
              <div>
                <label class="label">Strategy Tag</label>
                <input id="strategy" type="text" class="input" placeholder="Breakout / Mean Reversion" />
              </div>
              <div>
                <label class="label">Risk ₹ (opt.)</label>
                <input id="risk" type="number" step="0.01" class="input" placeholder="If no stop" />
              </div>
            </div>
            <div>
              <label class="label">Notes</label>
              <textarea id="notes" class="input" rows="3" placeholder="What was the setup, emotions, mistakes?"></textarea>
            </div>
            <div>
              <label class="label">Screenshot URL (opt.)</label>
              <input id="shot" type="url" class="input" placeholder="https://i.imgur.com/chart.png" />
            </div>
            <div class="flex items-center gap-2 pt-1">
              <button class="btn btn-primary" type="submit">Save Trade</button>
              <button id="deleteBtn" class="btn btn-ghost" type="button">Delete</button>
            </div>
          </form>
        </div>

        <div class="card space-y-3">
          <h2 class="font-semibold">Filters</h2>
          <div class="grid grid-cols-2 gap-3">
            <div>
              <label class="label">From</label>
              <input id="fFrom" type="date" class="input" />
            </div>
            <div>
              <label class="label">To</label>
              <input id="fTo" type="date" class="input" />
            </div>
          </div>
          <div class="grid grid-cols-2 gap-3">
            <div>
              <label class="label">Symbol</label>
              <input id="fSymbol" type="text" class="input" placeholder="e.g., NIFTY" />
            </div>
            <div>
              <label class="label">Side</label>
              <select id="fSide" class="input">
                <option value="">Any</option>
                <option>LONG</option>
                <option>SHORT</option>
              </select>
            </div>
          </div>
          <div class="grid grid-cols-2 gap-3">
            <div>
              <label class="label">Strategy Tag</label>
              <input id="fStrategy" type="text" class="input" placeholder="Breakout" />
            </div>
            <div class="grid grid-cols-2 gap-3">
              <div>
                <label class="label">Min R</label>
                <input id="fMinR" type="number" step="0.01" class="input" />
              </div>
              <div>
                <label class="label">Max R</label>
                <input id="fMaxR" type="number" step="0.01" class="input" />
              </div>
            </div>
          </div>
          <div class="flex items-center gap-2">
            <button id="clearFiltersBtn" class="btn btn-ghost">Clear Filters</button>
          </div>
        </div>
      </aside>

      <!-- Table + Chart -->
      <main class="lg:col-span-2 space-y-6">
        <div class="card space-y-3">
          <div class="flex items-center justify-between">
            <h2 class="font-semibold">Trades</h2>
            <div class="text-xs text-zinc-500">Click a row to edit</div>
          </div>
          <div class="overflow-x-auto">
            <table class="min-w-full text-sm">
              <thead class="text-left border-b text-zinc-600">
                <tr>
                  <th class="py-2 pr-3">Date</th>
                  <th class="py-2 pr-3">Symbol</th>
                  <th class="py-2 pr-3">Side</th>
                  <th class="py-2 pr-3">Qty</th>
                  <th class="py-2 pr-3">Entry</th>
                  <th class="py-2 pr-3">Exit</th>
                  <th class="py-2 pr-3">Fees</th>
                  <th class="py-2 pr-3">P&amp;L</th>
                  <th class="py-2 pr-3">R</th>
                  <th class="py-2 pr-3">Tag</th>
                </tr>
              </thead>
              <tbody id="tbody" class="divide-y"></tbody>
            </table>
          </div>
          <div id="pagination" class="flex items-center justify-between pt-2 text-sm"></div>
        </div>

        <div class="card space-y-3">
          <div class="flex items-center justify-between">
            <h2 class="font-semibold">Equity Curve</h2>
            <div class="text-xs text-zinc-500">Cumulative P&amp;L over time</div>
          </div>
          <canvas id="equityChart" height="100"></canvas>
        </div>
      </main>
    </section>

    <footer class="mt-8 text-xs text-zinc-500">
      Data is stored locally in your browser (no server). Tip: add this page to your phone home screen to use it like an app.
      &middot; <a class="link" href="README.html">Setup &amp; Publish Guide</a>
    </footer>
  </div>
  <script src="app.js"></script>
</body>
</html>
